<!DOCTYPE html>
<html>
<head>
    <title>Attendance Checking</title>
    <style>
        table {
            width: 100%;
            border-collapse: collapse;
        }

        table, th, td {
            border: 1px solid black;
            padding: 5px;
        }
    </style>
</head>
<body>
    <h1>Attendance List</h1>
    
    <?php
    // Check if the form is submitted
    if ($_SERVER['REQUEST_METHOD'] === 'POST') {
        // Retrieve the data from the QR code scanner
        $studentName = $_POST['studentName'];
        $date = date('Y-m-d');
        $timeIn = date('H:i:s');

        // Append the attendance details to a file
        $attendanceData = $studentName . ',' . $date . ',' . $timeIn . "\n";
        file_put_contents('attendance.csv', $attendanceData, FILE_APPEND);
    }
    ?>

    <form method="POST">
        <label for="studentName">Student Name:</label>
        <input type="text" id="studentName" name="studentName" required>
        <input type="submit" value="Submit">
    </form>

    <br>

    <h2>Attendance Table</h2>
    <table>
        <tr>
            <th>Student Name</th>
            <th>Date</th>
            <th>Time In</th>
        </tr>
        <?php
        // Read the attendance data from the file and populate the table
        $attendanceFile = file('attendance.csv');
        foreach ($attendanceFile as $attendance) {
            $attendanceDetails = explode(',', $attendance);
            $studentName = $attendanceDetails[0];
            $date = $attendanceDetails[1];
            $timeIn = $attendanceDetails[2];
            echo "<tr>
                    <td>$studentName</td>
                    <td>$date</td>
                    <td>$timeIn</td>
                </tr>";
        }
        ?>
    </table>
</body>
</html>
